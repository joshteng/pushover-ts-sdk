{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export class Pushover {\n  private endpoint = \"https://api.pushover.net/1/messages.json\";\n  private token: string;\n  private user: string;\n\n  constructor(apiKey: string, userGroup: string) {\n    this.token = apiKey;\n    this.user = userGroup;\n  }\n\n  async notify(message: string, priority = 0) {\n    console.log(\"sending notification......\");\n\n    const body: { [key: string]: string | number } = {\n      token: this.token,\n      user: this.user,\n      message: message,\n    };\n\n    if (priority != 0) {\n      body[\"priority\"] = priority;\n    }\n\n    if (priority == 2) {\n      body[\"retry\"] = 10 * 60;\n      body[\"expire\"] = 2 * 60 * 60;\n    }\n\n    const resp = await fetch(this.endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body: JSON.stringify(body),\n    });\n\n    if (resp.status !== 200) {\n      console.log(\"Notification failed\");\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAO,IAAM,WAAN,MAAe;AAAA,EAKpB,YAAY,QAAgB,WAAmB;AAJ/C,SAAQ,WAAW;AAKjB,SAAK,QAAQ;AACb,SAAK,OAAO;AAAA,EACd;AAAA,EAEM,OAAO,SAAiB,WAAW,GAAG;AAAA;AAC1C,cAAQ,IAAI,4BAA4B;AAExC,YAAM,OAA2C;AAAA,QAC/C,OAAO,KAAK;AAAA,QACZ,MAAM,KAAK;AAAA,QACX;AAAA,MACF;AAEA,UAAI,YAAY,GAAG;AACjB,aAAK,UAAU,IAAI;AAAA,MACrB;AAEA,UAAI,YAAY,GAAG;AACjB,aAAK,OAAO,IAAI,KAAK;AACrB,aAAK,QAAQ,IAAI,IAAI,KAAK;AAAA,MAC5B;AAEA,YAAM,OAAO,MAAM,MAAM,KAAK,UAAU;AAAA,QACtC,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,QAClB;AAAA,QACA,MAAM,KAAK,UAAU,IAAI;AAAA,MAC3B,CAAC;AAED,UAAI,KAAK,WAAW,KAAK;AACvB,gBAAQ,IAAI,qBAAqB;AAAA,MACnC;AAAA,IACF;AAAA;AACF;","names":[]}